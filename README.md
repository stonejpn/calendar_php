## カレンダー

カレンダーをPHPで実装する

### 仕様

* 2015～2034年までの20年間を表示する
* 月別カレンダー、年間カレンダーの２通りを選択できる
* 日曜始まり、月曜始まりを選択できる
* 日本の暦の休日、祝日を表示する
  * 2025年以降の春分の日、秋分の日は暫定的にそれぞれ3/20、9/22とする
  * 休日・祝日の「〇〇の日」もあわせて表示する
* URLで表示する年月を指定できる
  * 月別 2024年1月：`/2024/01`
  * 年別 2024年：`/2024`
* 対応ブラウザ
  * Chrome



### 実行

Dockerを使用して、サーバー環境を実現

http://localhost:8000/で表示させる



必要なソフトウェア

* Composer
* Docker



#### PHPの準備

```
$ cd (プロジェクトRoot)

# Composerでインストール
$ composer install
```



#### サーバーを起動する

```
$ cd (プロジェクトROOT)

# Dockerイメージを作成
$ ./build.sh

# サーバーを起動
$ ./start.sh
```



### 開発・実装

#### 開発環境

Windows11のWSL2にインストールされたAlmaLinux9上で、開発を行った。

エディタは、IntelliJ IDEAを使用した。

検証ブラウザは、

* Firefox
* Chrome
* Microsoft Edge

それぞれ、2024年5月20日時点での最新版。



#### 実行環境

実行環境は、Dockerコンテナで、Apache + mod_phpで動作させている。

今日的には、nginx + php-fpm組み合わせなのだろうが、Apacheでは１つのDockerイメージで実装できるため、Apache + mod_phpを選択。

ベースイメージは、`php:8.3-apache`。

Apacheは2.4.59、PHPは8.3.7となっている。



コンテナを実行する際、プロジェクトディレクトリを、コンテナの`/app`にバインドしている。



#### mod_rewrite

URLのパス、`/2024`や、`/2024/05`での表示させるため、mod_rewriteを使用。

mod_rewriteの設定部分

```apache
  RewriteEngine on
  RewriteRule ^/([0-9]{4}/[0-9][0-9]?) /index.php/$1 [L,QSA]
  RewriteRule ^/([0-9]{4})/? /index.php/$1 [L,QSA]
```



#### オートローダー

Composerのオートローダーを利用する。

他のライブラリは使用していないが、この方法が手っ取り早い。



#### テンプレートライブラリ

この程度の規模なら、テンプレートライブラリは大げさ過ぎるので使わない判断をした。

出力に際して、余分なコードが介在しない分、軽くて速い。



#### コードスタイル

PSR-12に準拠



#### 休日データ

http://calendar.infocharge.net/を参考して、JSONデータを作成した。
